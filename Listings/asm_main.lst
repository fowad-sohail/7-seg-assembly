


ARM Macro Assembler    Page 1 


    1 00000000         ;Fowad Sohail and Tim Catrino
    2 00000000         ;Intro to Embedded Final Project
    3 00000000         ;7 Seg Display Counter
    4 00000000         
    5 00000000         ; Port 1 Pin Direction Register
    6 00000000 40004C04 
                       P1DIR   EQU              0x40004C04
    7 00000000         ; Port 1 Pin Output Register
    8 00000000 40004C02 
                       P1OUT   EQU              0x40004C02
    9 00000000 40004C00 
                       P1IN    EQU              0x40004C00
   10 00000000 40004C06 
                       P1REN   EQU              0x40004C06
   11 00000000         
   12 00000000 40004C07 
                       P2REN   EQU              0x40004C07  ; resistor enable
   13 00000000 40004C05 
                       P2DIR   EQU              0x40004C05
   14 00000000 40004C03 
                       P2OUT   EQU              0x40004C03
   15 00000000 40004C01 
                       P2IN    EQU              0x40004C01
   16 00000000         
   17 00000000 40004C22 
                       P3OUT   EQU              0x40004C22
   18 00000000 40004C24 
                       P3DIR   EQU              0x40004C24
   19 00000000         
   20 00000000 40004C42 
                       P5OUT   EQU              0x40004C42
   21 00000000 40004C44 
                       P5DIR   EQU              0x40004C44
   22 00000000         
   23 00000000         
   24 00000000 00000002 
                       UPmask  EQU              0x2         ; bitmask P1.1
   25 00000000 00000010 
                       DOWNmask
                               EQU              0x10        ; bitmask P1.4
   26 00000000         
   27 00000000         
   28 00000000         ; masks for all segments of the display
   29 00000000 00000040 
                       segA_mask
                               EQU              0x40        ; bitmask P3.6
   30 00000000 00000008 
                       segB_mask
                               EQU              0x8         ; bitmask P2.3
   31 00000000 00000080 
                       segC_mask
                               EQU              0x80        ; bitmask P3.7
   32 00000000 00000020 
                       segD_mask
                               EQU              0x20        ; bitmask P3.5
   33 00000000 00000002 
                       segE_mask
                               EQU              0x2         ; bitmask P5.1
   34 00000000 00000004 



ARM Macro Assembler    Page 2 


                       segF_mask
                               EQU              0x4         ; bitmask P5.2
   35 00000000 00000001 
                       segG_mask
                               EQU              0x1         ; bitmask P5.0
   36 00000000         
   37 00000000         
   38 00000000                 THUMB
   39 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   40 00000000                 EXPORT           asm_main
   41 00000000         
   42 00000000         asm_main
   43 00000000 48FE            LDR              R0, =P2DIR
   44 00000002 7801            LDRB             R1, [R0]
   45 00000004 F041 0108       ORR              R1, #8
   46 00000008 7001            STRB             R1, [R0]
   47 0000000A         
   48 0000000A 48FD            LDR              R0, =P1DIR
   49 0000000C 7801            LDRB             R1, [R0]
   50 0000000E F041 0102       ORR              R1, #2
   51 00000012 7001            STRB             R1, [R0]
   52 00000014         
   53 00000014 48FB            LDR              R0, =P3DIR
   54 00000016 7801            LDRB             R1, [R0]
   55 00000018 F041 01E0       ORR              R1, #224
   56 0000001C 7001            STRB             R1, [R0]
   57 0000001E         
   58 0000001E 48FA            LDR              R0, =P5DIR
   59 00000020 7801            LDRB             R1, [R0]
   60 00000022 F041 0107       ORR              R1, #7
   61 00000026 7001            STRB             R1, [R0]
   62 00000028         
   63 00000028         ; initally clear all the ports - P2, P3, P5
   64 00000028 48F8            LDR              R0, =P2OUT
   65 0000002A 7801            LDRB             R1, [R0]
   66 0000002C F041 0108       ORR              R1, segB_mask
   67 00000030 7001            STRB             R1, [R0]
   68 00000032         
   69 00000032 48F7            LDR              R0, =P3OUT
   70 00000034 7801            LDRB             R1, [R0]
   71 00000036 F041 01E0       ORR              R1, #224
   72 0000003A 7001            STRB             R1, [R0]
   73 0000003C         
   74 0000003C 48F5            LDR              R0, =P5OUT
   75 0000003E 7801            LDRB             R1, [R0]
   76 00000040 F041 0107       ORR              R1, #7
   77 00000044 7001            STRB             R1, [R0]
   78 00000046         
   79 00000046         loop
   80 00000046 F000 F801       BL               state0
   81 0000004A         
   82 0000004A E7FC            B                loop        ; repeat the loop
   83 0000004C         
   84 0000004C         ; STATES - these control what character is on the 7 segm
                       ent display
   85 0000004C         ;-------------------------------------------------------
                       ------------------------
   86 0000004C         state0



ARM Macro Assembler    Page 3 


   87 0000004C 48F2            LDR              R0, =200000
   88 0000004E F000 F998       BL               delayMs
   89 00000052         
   90 00000052 F000 F999       BL               allOFF
   91 00000056         
   92 00000056         ; to count up to 1
   93 00000056 48F1            LDR              r0, =P1IN
   94 00000058 7801            LDRB             r1, [r0]
   95 0000005A F011 0F02       TST              r1, UPmask
   96 0000005E D00F            BEQ              state1
   97 00000060         
   98 00000060 F000 F9A2       BL               displayA
   99 00000064 F000 F9A6       BL               displayB
  100 00000068 F000 F9AA       BL               displayC
  101 0000006C F000 F9AE       BL               displayD
  102 00000070 F000 F9B2       BL               displayE
  103 00000074 F000 F9B6       BL               displayF
  104 00000078         
  105 00000078 48E7            LDR              R0, =200000
  106 0000007A F000 F982       BL               delayMs
  107 0000007E         
  108 0000007E E7E5            B                state0
  109 00000080         ;-------------------------------------------------------
                       ------------------------
  110 00000080         state1
  111 00000080 48E5            LDR              R0, =200000
  112 00000082 F000 F97E       BL               delayMs
  113 00000086         
  114 00000086 F000 F97F       BL               allOFF
  115 0000008A         
  116 0000008A         ; to count up to 2
  117 0000008A 48E4            LDR              r0, =P1IN
  118 0000008C 7801            LDRB             r1, [r0]
  119 0000008E F011 0F02       TST              r1, UPmask
  120 00000092 D009            BEQ              state2
  121 00000094         
  122 00000094         ; to count down to 0
  123 00000094 48E1            LDR              r0, =P1IN
  124 00000096 7801            LDRB             r1, [r0]
  125 00000098 F011 0F10       TST              r1, DOWNmask
  126 0000009C D0D6            BEQ              state0
  127 0000009E         
  128 0000009E F000 F989       BL               displayB
  129 000000A2 F000 F98D       BL               displayC
  130 000000A6         
  131 000000A6 E7EB            B                state1
  132 000000A8         ;-------------------------------------------------------
                       ------------------------
  133 000000A8         state2
  134 000000A8 48DB            LDR              R0, =200000
  135 000000AA F000 F96A       BL               delayMs
  136 000000AE         
  137 000000AE F000 F96B       BL               allOFF
  138 000000B2         
  139 000000B2         ; to count up to 3
  140 000000B2 48DA            LDR              r0, =P1IN
  141 000000B4 7801            LDRB             r1, [r0]
  142 000000B6 F011 0F02       TST              r1, UPmask
  143 000000BA D00F            BEQ              state3



ARM Macro Assembler    Page 4 


  144 000000BC         
  145 000000BC         ; to count down to 1
  146 000000BC 48D7            LDR              r0, =P1IN
  147 000000BE 7801            LDRB             r1, [r0]
  148 000000C0 F011 0F10       TST              r1, DOWNmask
  149 000000C4 D0DC            BEQ              state1
  150 000000C6         
  151 000000C6 F000 F96F       BL               displayA
  152 000000CA F000 F973       BL               displayB
  153 000000CE F000 F97D       BL               displayD
  154 000000D2 F000 F981       BL               displayE
  155 000000D6 F000 F98B       BL               displayG
  156 000000DA         
  157 000000DA E7E5            B                state2
  158 000000DC         ;-------------------------------------------------------
                       ------------------------
  159 000000DC         state3
  160 000000DC 48CE            LDR              R0, =200000
  161 000000DE F000 F950       BL               delayMs
  162 000000E2         
  163 000000E2 F000 F951       BL               allOFF
  164 000000E6         
  165 000000E6         ; to count up to 4
  166 000000E6 48CD            LDR              r0, =P1IN
  167 000000E8 7801            LDRB             r1, [r0]
  168 000000EA F011 0F02       TST              r1, UPmask
  169 000000EE D00F            BEQ              state4
  170 000000F0         
  171 000000F0         ; to count down to 2
  172 000000F0 48CA            LDR              r0, =P1IN
  173 000000F2 7801            LDRB             r1, [r0]
  174 000000F4 F011 0F10       TST              r1, DOWNmask
  175 000000F8 D0D6            BEQ              state2
  176 000000FA         
  177 000000FA F000 F955       BL               displayA
  178 000000FE F000 F959       BL               displayB
  179 00000102 F000 F95D       BL               displayC
  180 00000106 F000 F961       BL               displayD
  181 0000010A F000 F971       BL               displayG
  182 0000010E         
  183 0000010E E7E5            B                state3
  184 00000110         ;-------------------------------------------------------
                       ------------------------
  185 00000110         state4
  186 00000110 48C1            LDR              R0, =200000
  187 00000112 F000 F936       BL               delayMs
  188 00000116         
  189 00000116 F000 F937       BL               allOFF
  190 0000011A         
  191 0000011A         ; to count up to 5
  192 0000011A 48C0            LDR              r0, =P1IN
  193 0000011C 7801            LDRB             r1, [r0]
  194 0000011E F011 0F02       TST              r1, UPmask
  195 00000122 D00D            BEQ              state5
  196 00000124         
  197 00000124         ; to count down to 3
  198 00000124 48BD            LDR              r0, =P1IN
  199 00000126 7801            LDRB             r1, [r0]
  200 00000128 F011 0F10       TST              r1, DOWNmask



ARM Macro Assembler    Page 5 


  201 0000012C D0D6            BEQ              state3
  202 0000012E         
  203 0000012E F000 F941       BL               displayB
  204 00000132 F000 F945       BL               displayC
  205 00000136 F000 F955       BL               displayF
  206 0000013A F000 F959       BL               displayG
  207 0000013E         
  208 0000013E E7E7            B                state4
  209 00000140         ;-------------------------------------------------------
                       ------------------------
  210 00000140         state5
  211 00000140 48B5            LDR              R0, =200000
  212 00000142 F000 F91E       BL               delayMs
  213 00000146         
  214 00000146 F000 F91F       BL               allOFF
  215 0000014A         
  216 0000014A         ; to count up to 6
  217 0000014A 48B4            LDR              r0, =P1IN
  218 0000014C 7801            LDRB             r1, [r0]
  219 0000014E F011 0F02       TST              r1, UPmask
  220 00000152 D00F            BEQ              state6
  221 00000154         
  222 00000154         ; to count down to 4
  223 00000154 48B1            LDR              r0, =P1IN
  224 00000156 7801            LDRB             r1, [r0]
  225 00000158 F011 0F10       TST              r1, DOWNmask
  226 0000015C D0D8            BEQ              state4
  227 0000015E         
  228 0000015E F000 F923       BL               displayA
  229 00000162 F000 F92D       BL               displayC
  230 00000166 F000 F931       BL               displayD
  231 0000016A F000 F93B       BL               displayF
  232 0000016E F000 F93F       BL               displayG
  233 00000172         
  234 00000172 E7E5            B                state5
  235 00000174         ;-------------------------------------------------------
                       ------------------------
  236 00000174         state6
  237 00000174 48A8            LDR              R0, =200000
  238 00000176 F000 F904       BL               delayMs
  239 0000017A         
  240 0000017A F000 F905       BL               allOFF
  241 0000017E         
  242 0000017E         ; to count up to 7
  243 0000017E 48A7            LDR              r0, =P1IN
  244 00000180 7801            LDRB             r1, [r0]
  245 00000182 F011 0F02       TST              r1, UPmask
  246 00000186 D011            BEQ              state7
  247 00000188         
  248 00000188         ; to count down to 5
  249 00000188 48A4            LDR              r0, =P1IN
  250 0000018A 7801            LDRB             r1, [r0]
  251 0000018C F011 0F10       TST              r1, DOWNmask
  252 00000190 D0D6            BEQ              state5
  253 00000192         
  254 00000192 F000 F909       BL               displayA
  255 00000196 F000 F913       BL               displayC
  256 0000019A F000 F917       BL               displayD
  257 0000019E F000 F91B       BL               displayE



ARM Macro Assembler    Page 6 


  258 000001A2 F000 F91F       BL               displayF
  259 000001A6 F000 F923       BL               displayG
  260 000001AA         
  261 000001AA E7E3            B                state6
  262 000001AC         ;-------------------------------------------------------
                       ------------------------
  263 000001AC         state7
  264 000001AC 489A            LDR              R0, =200000
  265 000001AE F000 F8E8       BL               delayMs
  266 000001B2         
  267 000001B2 F000 F8E9       BL               allOFF
  268 000001B6         
  269 000001B6         ; to count up to 8
  270 000001B6 4899            LDR              r0, =P1IN
  271 000001B8 7801            LDRB             r1, [r0]
  272 000001BA F011 0F02       TST              r1, UPmask
  273 000001BE D00B            BEQ              state8
  274 000001C0         
  275 000001C0         ; to count down to 6
  276 000001C0 4896            LDR              r0, =P1IN
  277 000001C2 7801            LDRB             r1, [r0]
  278 000001C4 F011 0F10       TST              r1, DOWNmask
  279 000001C8 D0D4            BEQ              state6
  280 000001CA         
  281 000001CA F000 F8ED       BL               displayA
  282 000001CE F000 F8F1       BL               displayB
  283 000001D2 F000 F8F5       BL               displayC
  284 000001D6         
  285 000001D6 E7E9            B                state7
  286 000001D8         ;-------------------------------------------------------
                       ------------------------
  287 000001D8         state8
  288 000001D8 488F            LDR              R0, =200000
  289 000001DA F000 F8D2       BL               delayMs
  290 000001DE         
  291 000001DE F000 F8D3       BL               allOFF
  292 000001E2         
  293 000001E2         ; to count up to 9
  294 000001E2 488E            LDR              r0, =P1IN
  295 000001E4 7801            LDRB             r1, [r0]
  296 000001E6 F011 0F02       TST              r1, UPmask
  297 000001EA D013            BEQ              state9
  298 000001EC         
  299 000001EC         ; to count down to 7
  300 000001EC 488B            LDR              r0, =P1IN
  301 000001EE 7801            LDRB             r1, [r0]
  302 000001F0 F011 0F10       TST              r1, DOWNmask
  303 000001F4 D0DA            BEQ              state7
  304 000001F6         
  305 000001F6 F000 F8D7       BL               displayA
  306 000001FA F000 F8DB       BL               displayB
  307 000001FE F000 F8DF       BL               displayC
  308 00000202 F000 F8E3       BL               displayD
  309 00000206 F000 F8E7       BL               displayE
  310 0000020A F000 F8EB       BL               displayF
  311 0000020E F000 F8EF       BL               displayG
  312 00000212         
  313 00000212 E7E1            B                state8
  314 00000214         ;-------------------------------------------------------



ARM Macro Assembler    Page 7 


                       ------------------------
  315 00000214         state9
  316 00000214 4880            LDR              R0, =200000
  317 00000216 F000 F8B4       BL               delayMs
  318 0000021A         
  319 0000021A F000 F8B5       BL               allOFF
  320 0000021E         
  321 0000021E         ; to count up to A
  322 0000021E 487F            LDR              r0, =P1IN
  323 00000220 7801            LDRB             r1, [r0]
  324 00000222 F011 0F02       TST              r1, UPmask
  325 00000226 D011            BEQ              stateA
  326 00000228         
  327 00000228         ; to count down to 8
  328 00000228 487C            LDR              r0, =P1IN
  329 0000022A 7801            LDRB             r1, [r0]
  330 0000022C F011 0F10       TST              r1, DOWNmask
  331 00000230 D0D2            BEQ              state8
  332 00000232         
  333 00000232 F000 F8B9       BL               displayA
  334 00000236 F000 F8BD       BL               displayB
  335 0000023A F000 F8C1       BL               displayC
  336 0000023E F000 F8C5       BL               displayD
  337 00000242 F000 F8CF       BL               displayF
  338 00000246 F000 F8D3       BL               displayG
  339 0000024A         
  340 0000024A E7E3            B                state9
  341 0000024C         ;-------------------------------------------------------
                       ------------------------ 
  342 0000024C         stateA
  343 0000024C 4872            LDR              R0, =200000
  344 0000024E F000 F898       BL               delayMs
  345 00000252         
  346 00000252 F000 F899       BL               allOFF
  347 00000256         
  348 00000256         ; to count up to B
  349 00000256 4871            LDR              r0, =P1IN
  350 00000258 7801            LDRB             r1, [r0]
  351 0000025A F011 0F02       TST              r1, UPmask
  352 0000025E D011            BEQ              stateB
  353 00000260         
  354 00000260         ; to count down to 9
  355 00000260 486E            LDR              r0, =P1IN
  356 00000262 7801            LDRB             r1, [r0]
  357 00000264 F011 0F10       TST              r1, DOWNmask
  358 00000268 D0D4            BEQ              state9
  359 0000026A         
  360 0000026A F000 F89D       BL               displayA
  361 0000026E F000 F8A1       BL               displayB
  362 00000272 F000 F8A5       BL               displayC
  363 00000276 F000 F8AF       BL               displayE
  364 0000027A F000 F8B3       BL               displayF
  365 0000027E F000 F8B7       BL               displayG
  366 00000282         
  367 00000282 E7E3            B                stateA
  368 00000284         ;-------------------------------------------------------
                       ------------------------
  369 00000284         stateB
  370 00000284 4864            LDR              R0, =200000



ARM Macro Assembler    Page 8 


  371 00000286 F000 F87C       BL               delayMs
  372 0000028A         
  373 0000028A F000 F87D       BL               allOFF
  374 0000028E         
  375 0000028E         ; to count up to C
  376 0000028E 4863            LDR              r0, =P1IN
  377 00000290 7801            LDRB             r1, [r0]
  378 00000292 F011 0F02       TST              r1, UPmask
  379 00000296 D00F            BEQ              stateC
  380 00000298         
  381 00000298         ; to count down to A
  382 00000298 4860            LDR              r0, =P1IN
  383 0000029A 7801            LDRB             r1, [r0]
  384 0000029C F011 0F10       TST              r1, DOWNmask
  385 000002A0 D0D4            BEQ              stateA
  386 000002A2         
  387 000002A2 F000 F88D       BL               displayC
  388 000002A6 F000 F891       BL               displayD
  389 000002AA F000 F895       BL               displayE
  390 000002AE F000 F899       BL               displayF
  391 000002B2 F000 F89D       BL               displayG
  392 000002B6         
  393 000002B6 E7E5            B                stateB
  394 000002B8         ;-------------------------------------------------------
                       ------------------------
  395 000002B8         stateC
  396 000002B8 4857            LDR              R0, =200000
  397 000002BA F000 F862       BL               delayMs
  398 000002BE         
  399 000002BE F000 F863       BL               allOFF
  400 000002C2         
  401 000002C2         ; to count up to D
  402 000002C2 4856            LDR              r0, =P1IN
  403 000002C4 7801            LDRB             r1, [r0]
  404 000002C6 F011 0F02       TST              r1, UPmask
  405 000002CA D00D            BEQ              stateD
  406 000002CC         
  407 000002CC         ; to count down to B
  408 000002CC 4853            LDR              r0, =P1IN
  409 000002CE 7801            LDRB             r1, [r0]
  410 000002D0 F011 0F10       TST              r1, DOWNmask
  411 000002D4 D0D6            BEQ              stateB
  412 000002D6         
  413 000002D6 F000 F867       BL               displayA
  414 000002DA F000 F877       BL               displayD
  415 000002DE F000 F87B       BL               displayE
  416 000002E2 F000 F87F       BL               displayF
  417 000002E6         
  418 000002E6 E7E7            B                stateC
  419 000002E8         ;-------------------------------------------------------
                       ------------------------
  420 000002E8         stateD
  421 000002E8 484B            LDR              R0, =200000
  422 000002EA F000 F84A       BL               delayMs
  423 000002EE         
  424 000002EE F000 F84B       BL               allOFF
  425 000002F2         
  426 000002F2         ; to count up to E
  427 000002F2 484A            LDR              r0, =P1IN



ARM Macro Assembler    Page 9 


  428 000002F4 7801            LDRB             r1, [r0]
  429 000002F6 F011 0F02       TST              r1, UPmask
  430 000002FA D00F            BEQ              stateE
  431 000002FC         
  432 000002FC         ; to count down to C
  433 000002FC 4847            LDR              r0, =P1IN
  434 000002FE 7801            LDRB             r1, [r0]
  435 00000300 F011 0F10       TST              r1, DOWNmask
  436 00000304 D0D8            BEQ              stateC
  437 00000306         
  438 00000306 F000 F855       BL               displayB
  439 0000030A F000 F859       BL               displayC
  440 0000030E F000 F85D       BL               displayD
  441 00000312 F000 F861       BL               displayE
  442 00000316 F000 F86B       BL               displayG
  443 0000031A         
  444 0000031A E7E5            B                stateD
  445 0000031C         ;-------------------------------------------------------
                       ------------------------ 
  446 0000031C         stateE
  447 0000031C 483E            LDR              R0, =200000
  448 0000031E F000 F830       BL               delayMs
  449 00000322         
  450 00000322 F000 F831       BL               allOFF
  451 00000326         
  452 00000326         ; to count up to F
  453 00000326 483D            LDR              r0, =P1IN
  454 00000328 7801            LDRB             r1, [r0]
  455 0000032A F011 0F02       TST              r1, UPmask
  456 0000032E D00F            BEQ              stateF
  457 00000330         
  458 00000330         ; to count down to D
  459 00000330 483A            LDR              r0, =P1IN
  460 00000332 7801            LDRB             r1, [r0]
  461 00000334 F011 0F10       TST              r1, DOWNmask
  462 00000338 D0D6            BEQ              stateD
  463 0000033A         
  464 0000033A F000 F835       BL               displayA
  465 0000033E F000 F845       BL               displayD
  466 00000342 F000 F849       BL               displayE
  467 00000346 F000 F84D       BL               displayF
  468 0000034A F000 F851       BL               displayG
  469 0000034E         
  470 0000034E E7E5            B                stateE
  471 00000350         ;-------------------------------------------------------
                       ------------------------
  472 00000350         stateF
  473 00000350 4831            LDR              R0, =200000
  474 00000352 F000 F816       BL               delayMs
  475 00000356         
  476 00000356 F000 F817       BL               allOFF
  477 0000035A         
  478 0000035A         ; to count down to E
  479 0000035A 4830            LDR              r0, =P1IN
  480 0000035C 7801            LDRB             r1, [r0]
  481 0000035E F011 0F10       TST              r1, DOWNmask
  482 00000362 D0DB            BEQ              stateE
  483 00000364         
  484 00000364         



ARM Macro Assembler    Page 10 


  485 00000364         ; if count up button pressed, roll over to 0
  486 00000364 482D            LDR              r0, =P1IN
  487 00000366 7801            LDRB             r1, [r0]
  488 00000368 F011 0F02       TST              r1, UPmask
  489 0000036C F43F AE6E       BEQ              state0
  490 00000370         
  491 00000370         
  492 00000370         
  493 00000370 F000 F81A       BL               displayA
  494 00000374 F000 F830       BL               displayE
  495 00000378 F000 F834       BL               displayF
  496 0000037C F000 F838       BL               displayG
  497 00000380         
  498 00000380 E7E6            B                stateF
  499 00000382         ; ------------------------------------------------------
                       ------------------------
  500 00000382         
  501 00000382         ; SUBROUTINES - these control which segment to light up
  502 00000382         ; ------------------------------------------------------
                       ------------------------
  503 00000382         delayMs                              ; delay
  504 00000382         
  505 00000382 3801    L1      SUBS             R0, #1      ; inner loop
  506 00000384 D1FD            BNE              L1
  507 00000386 4770            BX               LR
  508 00000388         
  509 00000388         allOFF                               ; turn all segments
                                                             off
  510 00000388 4820            LDR              R0, =P2OUT
  511 0000038A 7801            LDRB             R1, [R0]
  512 0000038C F041 0108       ORR              R1, segB_mask
  513 00000390 7001            STRB             R1, [R0]
  514 00000392         
  515 00000392 481F            LDR              R0, =P3OUT
  516 00000394 7801            LDRB             R1, [R0]
  517 00000396 F041 01E0       ORR              R1, #224
  518 0000039A 7001            STRB             R1, [R0]
  519 0000039C         
  520 0000039C 481D            LDR              R0, =P5OUT
  521 0000039E 7801            LDRB             R1, [R0]
  522 000003A0 F041 0107       ORR              R1, #7
  523 000003A4 7001            STRB             R1, [R0]
  524 000003A6         
  525 000003A6 4770            BX               LR
  526 000003A8         
  527 000003A8         displayA                             ; turn on port 3.6
  528 000003A8 4819            LDR              R0, =P3OUT
  529 000003AA 7801            LDRB             R1, [R0]
  530 000003AC F021 0140       BIC              R1, segA_mask
  531 000003B0 7001            STRB             R1, [R0]
  532 000003B2 4770            BX               LR
  533 000003B4         
  534 000003B4         displayB                             ; turn on port 2.3
  535 000003B4 4815            LDR              R0, =P2OUT
  536 000003B6 7801            LDRB             R1, [R0]
  537 000003B8 F021 0108       BIC              R1, segB_mask
  538 000003BC 7001            STRB             R1, [R0]
  539 000003BE 4770            BX               LR
  540 000003C0         



ARM Macro Assembler    Page 11 


  541 000003C0         displayC                             ; turn on port 3.7
  542 000003C0 4813            LDR              R0, =P3OUT
  543 000003C2 7801            LDRB             R1, [R0]
  544 000003C4 F021 0180       BIC              R1, segC_mask
  545 000003C8 7001            STRB             R1, [R0]
  546 000003CA 4770            BX               LR
  547 000003CC         
  548 000003CC         displayD                             ; turn on port 3.5
  549 000003CC 4810            LDR              R0, =P3OUT
  550 000003CE 7801            LDRB             R1, [R0]
  551 000003D0 F021 0120       BIC              R1, segD_mask
  552 000003D4 7001            STRB             R1, [R0]
  553 000003D6 4770            BX               LR
  554 000003D8         
  555 000003D8         displayE                             ; turn on port 5.1
  556 000003D8 480E            LDR              R0, =P5OUT
  557 000003DA 7801            LDRB             R1, [R0]
  558 000003DC F021 0102       BIC              R1, segE_mask
  559 000003E0 7001            STRB             R1, [R0]
  560 000003E2 4770            BX               LR
  561 000003E4         
  562 000003E4         displayF                             ; turn on port 5.2
  563 000003E4 480B            LDR              R0, =P5OUT
  564 000003E6 7801            LDRB             R1, [R0]
  565 000003E8 F021 0104       BIC              R1, segF_mask
  566 000003EC 7001            STRB             R1, [R0]
  567 000003EE 4770            BX               LR
  568 000003F0         
  569 000003F0         displayG                             ; turn on port 5.0
  570 000003F0 4808            LDR              R0, =P5OUT
  571 000003F2 7801            LDRB             R1, [R0]
  572 000003F4 F021 0101       BIC              R1, segG_mask
  573 000003F8 7001            STRB             R1, [R0]
  574 000003FA 4770            BX               LR
  575 000003FC         
  576 000003FC                 END
              40004C05 
              40004C04 
              40004C24 
              40004C44 
              40004C03 
              40004C22 
              40004C42 
              00030D40 
              40004C00 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\asm_main.d -o.\objects\asm_main.o -I.\RTE\_Target_1 -
IE:\Users\Fowad\AppData\Local\Arm\Packs\ARM\CMSIS\5.5.1\CMSIS\Core\Include -IE:
\Users\Fowad\AppData\Local\Arm\Packs\TexasInstruments\MSP432P4xx_DFP\3.2.6\Devi
ce\Include --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 528"
 --predefine="_RTE_ SETA 1" --predefine="__MSP432P401R__ SETA 1" --list=.\listi
ngs\asm_main.lst asm_main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 39 in file asm_main.s
   Uses
      None
Comment: .text unused
L1 00000382

Symbol: L1
   Definitions
      At line 505 in file asm_main.s
   Uses
      At line 506 in file asm_main.s
Comment: L1 used once
allOFF 00000388

Symbol: allOFF
   Definitions
      At line 509 in file asm_main.s
   Uses
      At line 90 in file asm_main.s
      At line 114 in file asm_main.s
      At line 137 in file asm_main.s
      At line 163 in file asm_main.s
      At line 189 in file asm_main.s
      At line 214 in file asm_main.s
      At line 240 in file asm_main.s
      At line 267 in file asm_main.s
      At line 291 in file asm_main.s
      At line 319 in file asm_main.s
      At line 346 in file asm_main.s
      At line 373 in file asm_main.s
      At line 399 in file asm_main.s
      At line 424 in file asm_main.s
      At line 450 in file asm_main.s
      At line 476 in file asm_main.s

asm_main 00000000

Symbol: asm_main
   Definitions
      At line 42 in file asm_main.s
   Uses
      At line 40 in file asm_main.s
Comment: asm_main used once
delayMs 00000382

Symbol: delayMs
   Definitions
      At line 503 in file asm_main.s
   Uses
      At line 88 in file asm_main.s
      At line 106 in file asm_main.s
      At line 112 in file asm_main.s
      At line 135 in file asm_main.s
      At line 161 in file asm_main.s
      At line 187 in file asm_main.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

      At line 212 in file asm_main.s
      At line 238 in file asm_main.s
      At line 265 in file asm_main.s
      At line 289 in file asm_main.s
      At line 317 in file asm_main.s
      At line 344 in file asm_main.s
      At line 371 in file asm_main.s
      At line 397 in file asm_main.s
      At line 422 in file asm_main.s
      At line 448 in file asm_main.s
      At line 474 in file asm_main.s

displayA 000003A8

Symbol: displayA
   Definitions
      At line 527 in file asm_main.s
   Uses
      At line 98 in file asm_main.s
      At line 151 in file asm_main.s
      At line 177 in file asm_main.s
      At line 228 in file asm_main.s
      At line 254 in file asm_main.s
      At line 281 in file asm_main.s
      At line 305 in file asm_main.s
      At line 333 in file asm_main.s
      At line 360 in file asm_main.s
      At line 413 in file asm_main.s
      At line 464 in file asm_main.s
      At line 493 in file asm_main.s

displayB 000003B4

Symbol: displayB
   Definitions
      At line 534 in file asm_main.s
   Uses
      At line 99 in file asm_main.s
      At line 128 in file asm_main.s
      At line 152 in file asm_main.s
      At line 178 in file asm_main.s
      At line 203 in file asm_main.s
      At line 282 in file asm_main.s
      At line 306 in file asm_main.s
      At line 334 in file asm_main.s
      At line 361 in file asm_main.s
      At line 438 in file asm_main.s

displayC 000003C0

Symbol: displayC
   Definitions
      At line 541 in file asm_main.s
   Uses
      At line 100 in file asm_main.s
      At line 129 in file asm_main.s
      At line 179 in file asm_main.s
      At line 204 in file asm_main.s
      At line 229 in file asm_main.s



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

      At line 255 in file asm_main.s
      At line 283 in file asm_main.s
      At line 307 in file asm_main.s
      At line 335 in file asm_main.s
      At line 362 in file asm_main.s
      At line 387 in file asm_main.s
      At line 439 in file asm_main.s

displayD 000003CC

Symbol: displayD
   Definitions
      At line 548 in file asm_main.s
   Uses
      At line 101 in file asm_main.s
      At line 153 in file asm_main.s
      At line 180 in file asm_main.s
      At line 230 in file asm_main.s
      At line 256 in file asm_main.s
      At line 308 in file asm_main.s
      At line 336 in file asm_main.s
      At line 388 in file asm_main.s
      At line 414 in file asm_main.s
      At line 440 in file asm_main.s
      At line 465 in file asm_main.s

displayE 000003D8

Symbol: displayE
   Definitions
      At line 555 in file asm_main.s
   Uses
      At line 102 in file asm_main.s
      At line 154 in file asm_main.s
      At line 257 in file asm_main.s
      At line 309 in file asm_main.s
      At line 363 in file asm_main.s
      At line 389 in file asm_main.s
      At line 415 in file asm_main.s
      At line 441 in file asm_main.s
      At line 466 in file asm_main.s
      At line 494 in file asm_main.s

displayF 000003E4

Symbol: displayF
   Definitions
      At line 562 in file asm_main.s
   Uses
      At line 103 in file asm_main.s
      At line 205 in file asm_main.s
      At line 231 in file asm_main.s
      At line 258 in file asm_main.s
      At line 310 in file asm_main.s
      At line 337 in file asm_main.s
      At line 364 in file asm_main.s
      At line 390 in file asm_main.s
      At line 416 in file asm_main.s
      At line 467 in file asm_main.s



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Relocatable symbols

      At line 495 in file asm_main.s

displayG 000003F0

Symbol: displayG
   Definitions
      At line 569 in file asm_main.s
   Uses
      At line 155 in file asm_main.s
      At line 181 in file asm_main.s
      At line 206 in file asm_main.s
      At line 232 in file asm_main.s
      At line 259 in file asm_main.s
      At line 311 in file asm_main.s
      At line 338 in file asm_main.s
      At line 365 in file asm_main.s
      At line 391 in file asm_main.s
      At line 442 in file asm_main.s
      At line 468 in file asm_main.s
      At line 496 in file asm_main.s

loop 00000046

Symbol: loop
   Definitions
      At line 79 in file asm_main.s
   Uses
      At line 82 in file asm_main.s
Comment: loop used once
state0 0000004C

Symbol: state0
   Definitions
      At line 86 in file asm_main.s
   Uses
      At line 80 in file asm_main.s
      At line 108 in file asm_main.s
      At line 126 in file asm_main.s
      At line 489 in file asm_main.s

state1 00000080

Symbol: state1
   Definitions
      At line 110 in file asm_main.s
   Uses
      At line 96 in file asm_main.s
      At line 131 in file asm_main.s
      At line 149 in file asm_main.s

state2 000000A8

Symbol: state2
   Definitions
      At line 133 in file asm_main.s
   Uses
      At line 120 in file asm_main.s
      At line 157 in file asm_main.s
      At line 175 in file asm_main.s



ARM Macro Assembler    Page 5 Alphabetic symbol ordering
Relocatable symbols


state3 000000DC

Symbol: state3
   Definitions
      At line 159 in file asm_main.s
   Uses
      At line 143 in file asm_main.s
      At line 183 in file asm_main.s
      At line 201 in file asm_main.s

state4 00000110

Symbol: state4
   Definitions
      At line 185 in file asm_main.s
   Uses
      At line 169 in file asm_main.s
      At line 208 in file asm_main.s
      At line 226 in file asm_main.s

state5 00000140

Symbol: state5
   Definitions
      At line 210 in file asm_main.s
   Uses
      At line 195 in file asm_main.s
      At line 234 in file asm_main.s
      At line 252 in file asm_main.s

state6 00000174

Symbol: state6
   Definitions
      At line 236 in file asm_main.s
   Uses
      At line 220 in file asm_main.s
      At line 261 in file asm_main.s
      At line 279 in file asm_main.s

state7 000001AC

Symbol: state7
   Definitions
      At line 263 in file asm_main.s
   Uses
      At line 246 in file asm_main.s
      At line 285 in file asm_main.s
      At line 303 in file asm_main.s

state8 000001D8

Symbol: state8
   Definitions
      At line 287 in file asm_main.s
   Uses
      At line 273 in file asm_main.s
      At line 313 in file asm_main.s



ARM Macro Assembler    Page 6 Alphabetic symbol ordering
Relocatable symbols

      At line 331 in file asm_main.s

state9 00000214

Symbol: state9
   Definitions
      At line 315 in file asm_main.s
   Uses
      At line 297 in file asm_main.s
      At line 340 in file asm_main.s
      At line 358 in file asm_main.s

stateA 0000024C

Symbol: stateA
   Definitions
      At line 342 in file asm_main.s
   Uses
      At line 325 in file asm_main.s
      At line 367 in file asm_main.s
      At line 385 in file asm_main.s

stateB 00000284

Symbol: stateB
   Definitions
      At line 369 in file asm_main.s
   Uses
      At line 352 in file asm_main.s
      At line 393 in file asm_main.s
      At line 411 in file asm_main.s

stateC 000002B8

Symbol: stateC
   Definitions
      At line 395 in file asm_main.s
   Uses
      At line 379 in file asm_main.s
      At line 418 in file asm_main.s
      At line 436 in file asm_main.s

stateD 000002E8

Symbol: stateD
   Definitions
      At line 420 in file asm_main.s
   Uses
      At line 405 in file asm_main.s
      At line 444 in file asm_main.s
      At line 462 in file asm_main.s

stateE 0000031C

Symbol: stateE
   Definitions
      At line 446 in file asm_main.s
   Uses
      At line 430 in file asm_main.s



ARM Macro Assembler    Page 7 Alphabetic symbol ordering
Relocatable symbols

      At line 470 in file asm_main.s
      At line 482 in file asm_main.s

stateF 00000350

Symbol: stateF
   Definitions
      At line 472 in file asm_main.s
   Uses
      At line 456 in file asm_main.s
      At line 498 in file asm_main.s

29 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

DOWNmask 00000010

Symbol: DOWNmask
   Definitions
      At line 25 in file asm_main.s
   Uses
      At line 125 in file asm_main.s
      At line 148 in file asm_main.s
      At line 174 in file asm_main.s
      At line 200 in file asm_main.s
      At line 225 in file asm_main.s
      At line 251 in file asm_main.s
      At line 278 in file asm_main.s
      At line 302 in file asm_main.s
      At line 330 in file asm_main.s
      At line 357 in file asm_main.s
      At line 384 in file asm_main.s
      At line 410 in file asm_main.s
      At line 435 in file asm_main.s
      At line 461 in file asm_main.s
      At line 481 in file asm_main.s

P1DIR 40004C04

Symbol: P1DIR
   Definitions
      At line 6 in file asm_main.s
   Uses
      At line 48 in file asm_main.s
Comment: P1DIR used once
P1IN 40004C00

Symbol: P1IN
   Definitions
      At line 9 in file asm_main.s
   Uses
      At line 93 in file asm_main.s
      At line 117 in file asm_main.s
      At line 123 in file asm_main.s
      At line 140 in file asm_main.s
      At line 146 in file asm_main.s
      At line 166 in file asm_main.s
      At line 172 in file asm_main.s
      At line 192 in file asm_main.s
      At line 198 in file asm_main.s
      At line 217 in file asm_main.s
      At line 223 in file asm_main.s
      At line 243 in file asm_main.s
      At line 249 in file asm_main.s
      At line 270 in file asm_main.s
      At line 276 in file asm_main.s
      At line 294 in file asm_main.s
      At line 300 in file asm_main.s
      At line 322 in file asm_main.s
      At line 328 in file asm_main.s
      At line 349 in file asm_main.s
      At line 355 in file asm_main.s
      At line 376 in file asm_main.s
      At line 382 in file asm_main.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

      At line 402 in file asm_main.s
      At line 408 in file asm_main.s
      At line 427 in file asm_main.s
      At line 433 in file asm_main.s
      At line 453 in file asm_main.s
      At line 459 in file asm_main.s
      At line 479 in file asm_main.s
      At line 486 in file asm_main.s

P1OUT 40004C02

Symbol: P1OUT
   Definitions
      At line 8 in file asm_main.s
   Uses
      None
Comment: P1OUT unused
P1REN 40004C06

Symbol: P1REN
   Definitions
      At line 10 in file asm_main.s
   Uses
      None
Comment: P1REN unused
P2DIR 40004C05

Symbol: P2DIR
   Definitions
      At line 13 in file asm_main.s
   Uses
      At line 43 in file asm_main.s
Comment: P2DIR used once
P2IN 40004C01

Symbol: P2IN
   Definitions
      At line 15 in file asm_main.s
   Uses
      None
Comment: P2IN unused
P2OUT 40004C03

Symbol: P2OUT
   Definitions
      At line 14 in file asm_main.s
   Uses
      At line 64 in file asm_main.s
      At line 510 in file asm_main.s
      At line 535 in file asm_main.s

P2REN 40004C07

Symbol: P2REN
   Definitions
      At line 12 in file asm_main.s
   Uses
      None
Comment: P2REN unused



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

P3DIR 40004C24

Symbol: P3DIR
   Definitions
      At line 18 in file asm_main.s
   Uses
      At line 53 in file asm_main.s
Comment: P3DIR used once
P3OUT 40004C22

Symbol: P3OUT
   Definitions
      At line 17 in file asm_main.s
   Uses
      At line 69 in file asm_main.s
      At line 515 in file asm_main.s
      At line 528 in file asm_main.s
      At line 542 in file asm_main.s
      At line 549 in file asm_main.s

P5DIR 40004C44

Symbol: P5DIR
   Definitions
      At line 21 in file asm_main.s
   Uses
      At line 58 in file asm_main.s
Comment: P5DIR used once
P5OUT 40004C42

Symbol: P5OUT
   Definitions
      At line 20 in file asm_main.s
   Uses
      At line 74 in file asm_main.s
      At line 520 in file asm_main.s
      At line 556 in file asm_main.s
      At line 563 in file asm_main.s
      At line 570 in file asm_main.s

UPmask 00000002

Symbol: UPmask
   Definitions
      At line 24 in file asm_main.s
   Uses
      At line 95 in file asm_main.s
      At line 119 in file asm_main.s
      At line 142 in file asm_main.s
      At line 168 in file asm_main.s
      At line 194 in file asm_main.s
      At line 219 in file asm_main.s
      At line 245 in file asm_main.s
      At line 272 in file asm_main.s
      At line 296 in file asm_main.s
      At line 324 in file asm_main.s
      At line 351 in file asm_main.s
      At line 378 in file asm_main.s
      At line 404 in file asm_main.s



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Absolute symbols

      At line 429 in file asm_main.s
      At line 455 in file asm_main.s
      At line 488 in file asm_main.s

segA_mask 00000040

Symbol: segA_mask
   Definitions
      At line 29 in file asm_main.s
   Uses
      At line 530 in file asm_main.s
Comment: segA_mask used once
segB_mask 00000008

Symbol: segB_mask
   Definitions
      At line 30 in file asm_main.s
   Uses
      At line 66 in file asm_main.s
      At line 512 in file asm_main.s
      At line 537 in file asm_main.s

segC_mask 00000080

Symbol: segC_mask
   Definitions
      At line 31 in file asm_main.s
   Uses
      At line 544 in file asm_main.s
Comment: segC_mask used once
segD_mask 00000020

Symbol: segD_mask
   Definitions
      At line 32 in file asm_main.s
   Uses
      At line 551 in file asm_main.s
Comment: segD_mask used once
segE_mask 00000002

Symbol: segE_mask
   Definitions
      At line 33 in file asm_main.s
   Uses
      At line 558 in file asm_main.s
Comment: segE_mask used once
segF_mask 00000004

Symbol: segF_mask
   Definitions
      At line 34 in file asm_main.s
   Uses
      At line 565 in file asm_main.s
Comment: segF_mask used once
segG_mask 00000001

Symbol: segG_mask
   Definitions
      At line 35 in file asm_main.s



ARM Macro Assembler    Page 5 Alphabetic symbol ordering
Absolute symbols

   Uses
      At line 572 in file asm_main.s
Comment: segG_mask used once
21 symbols
387 symbols in table
