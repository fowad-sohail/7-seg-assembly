


ARM Macro Assembler    Page 1 


    1 00000000         ;Fowad Sohail and Tim Catrino
    2 00000000         ;Intro to Embedded Final Project
    3 00000000         ;7 Seg Display Counter
    4 00000000         
    5 00000000         ; Port 1 Pin Direction Register
    6 00000000 40004C04 
                       P1DIR   EQU              0x40004C04
    7 00000000         ; Port 1 Pin Output Register
    8 00000000 40004C02 
                       P1OUT   EQU              0x40004C02
    9 00000000 40004C00 
                       P1IN    EQU              0x40004C00
   10 00000000 40004C06 
                       P1REN   EQU              0x40004C06
   11 00000000         
   12 00000000 40004C07 
                       P2REN   EQU              0x40004C07  ; resistor enable
   13 00000000 40004C05 
                       P2DIR   EQU              0x40004C05
   14 00000000 40004C03 
                       P2OUT   EQU              0x40004C03
   15 00000000 40004C01 
                       P2IN    EQU              0x40004C01
   16 00000000         
   17 00000000 40004C22 
                       P3OUT   EQU              0x40004C22
   18 00000000 40004C24 
                       P3DIR   EQU              0x40004C24
   19 00000000         
   20 00000000         
   21 00000000         
   22 00000000         ; masks for all segments of the display
   23 00000000 00000040 
                       segA_mask
                               EQU              0x40        ; bitmask P3.6
   24 00000000 00000008 
                       segB_mask
                               EQU              0x8         ; bitmask P2.3
   25 00000000 00000080 
                       segC_mask
                               EQU              0x80        ; bitmask P3.7
   26 00000000 00000020 
                       segD_mask
                               EQU              0x20        ; bitmask P3.5
   27 00000000 00000002 
                       segE_mask
                               EQU              0x2         ; bitmask P5.1
   28 00000000 00000004 
                       segF_mask
                               EQU              0x4         ; bitmask P5.2
   29 00000000 00000001 
                       segG_mask
                               EQU              0x1         ; bitmask P5.0
   30 00000000         
   31 00000000         
   32 00000000                 THUMB
   33 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   34 00000000                 EXPORT           asm_main



ARM Macro Assembler    Page 2 


   35 00000000         
   36 00000000         asm_main
   37 00000000 4815            LDR              R0, =P2DIR
   38 00000002 7801            LDRB             R1, [R0]
   39 00000004 F041 01FF       ORR              R1, #255
   40 00000008 7001            STRB             R1, [R0]
   41 0000000A         
   42 0000000A 4814            LDR              R0, =P1DIR
   43 0000000C 7801            LDRB             R1, [R0]
   44 0000000E F041 01FF       ORR              R1, #255
   45 00000012 7001            STRB             R1, [R0]
   46 00000014         
   47 00000014 4812            LDR              R0, =P3DIR
   48 00000016 7801            LDRB             R1, [R0]
   49 00000018 F041 0180       ORR              R1, #segC_mask
   50 0000001C 7001            STRB             R1, [R0]
   51 0000001E         
   52 0000001E         ;  LDR     R0, =P2REN      ; load Dir Reg in R1
   53 0000001E         ;  LDRB    R1, [R0]        ;
   54 0000001E         ;  ORR     R1, FLAmask     ; set bit
   55 0000001E         ;  STRB    R1, [R0]        ; store back to Dir Reg
   56 0000001E         ;  
   57 0000001E 4811            LDR              R0, =P2OUT  ; load Dir Reg in R
                                                            1
   58 00000020 7801            LDRB             R1, [R0]    ;
   59 00000022 F041 0108       ORR              R1, 0x8     ; set bit ---- mayb
                                                            e? P2.3
   60 00000026 7001            STRB             R1, [R0]    ; store back to Dir
                                                             Reg
   61 00000028         
   62 00000028         
   63 00000028         
   64 00000028         loop
   65 00000028         ; start in state b
   66 00000028 F000 F801       BL               state1
   67 0000002C         
   68 0000002C E7FC            B                loop        ; repeat the loop
   69 0000002E         
   70 0000002E         ; STATES
   71 0000002E         ;-------------------------------------------------------
                       ------------------------
   72 0000002E         state1
   73 0000002E F000 F806       BL               displayB
   74 00000032 F000 F80A       BL               displayC
   75 00000036         
   76 00000036 E7FA            B                state1
   77 00000038         
   78 00000038         
   79 00000038         
   80 00000038         
   81 00000038         
   82 00000038         
   83 00000038         ; ------------------------------------------------------
                       ------------------------
   84 00000038         
   85 00000038         ; SUBROUTINES
   86 00000038         ; ------------------------------------------------------
                       ------------------------
   87 00000038         delayMs



ARM Macro Assembler    Page 3 


   88 00000038         
   89 00000038 3801    L1      SUBS             R0, #1      ; inner loop
   90 0000003A D1FD            BNE              L1
   91 0000003C 4770            BX               LR
   92 0000003E         
   93 0000003E         ;greenON
   94 0000003E         ;  LDR     R0, =P2OUT      ; load Output Data Reg in R1
   95 0000003E         ;        LDRB    R1, [R0]
   96 0000003E         ;        ORR     R1, #2          ; set bit 0
   97 0000003E         ;        STRB    R1, [R0]        ; store back to Output 
                       Data Reg
   98 0000003E         ;  BX      LR
   99 0000003E         
  100 0000003E         
  101 0000003E         displayB                             ; turn on port 2.3
  102 0000003E 4809            LDR              R0, =P2OUT
  103 00000040 7801            LDRB             R1, [R0]
  104 00000042 F041 0108       ORR              R1, segB_mask
  105 00000046 7001            STRB             R1, [R0]
  106 00000048 4770            BX               LR
  107 0000004A         
  108 0000004A         displayC                             ; turn on port 3.7
  109 0000004A 4807            LDR              R0, =P3OUT
  110 0000004C 7801            LDRB             R1, [R0]
  111 0000004E F041 0180       ORR              R1, segC_mask
  112 00000052 7001            STRB             R1, [R0]
  113 00000054 4770            BX               LR
  114 00000056         
  115 00000056                 END
              00 00 40004C05 
              40004C04 
              40004C24 
              40004C03 
              40004C22 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\asm_main.d -o.\objects\asm_main.o -I.\RTE\_Target_1 -
IE:\Users\Fowad\AppData\Local\Arm\Packs\ARM\CMSIS\5.5.1\CMSIS\Core\Include -IE:
\Users\Fowad\AppData\Local\Arm\Packs\TexasInstruments\MSP432P4xx_DFP\3.2.6\Devi
ce\Include --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 528"
 --predefine="_RTE_ SETA 1" --predefine="__MSP432P401R__ SETA 1" --list=.\listi
ngs\asm_main.lst asm_main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 33 in file asm_main.s
   Uses
      None
Comment: .text unused
L1 00000038

Symbol: L1
   Definitions
      At line 89 in file asm_main.s
   Uses
      At line 90 in file asm_main.s
Comment: L1 used once
asm_main 00000000

Symbol: asm_main
   Definitions
      At line 36 in file asm_main.s
   Uses
      At line 34 in file asm_main.s
Comment: asm_main used once
delayMs 00000038

Symbol: delayMs
   Definitions
      At line 87 in file asm_main.s
   Uses
      None
Comment: delayMs unused
displayB 0000003E

Symbol: displayB
   Definitions
      At line 101 in file asm_main.s
   Uses
      At line 73 in file asm_main.s
Comment: displayB used once
displayC 0000004A

Symbol: displayC
   Definitions
      At line 108 in file asm_main.s
   Uses
      At line 74 in file asm_main.s
Comment: displayC used once
loop 00000028

Symbol: loop
   Definitions
      At line 64 in file asm_main.s
   Uses
      At line 68 in file asm_main.s
Comment: loop used once
state1 0000002E

Symbol: state1



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 72 in file asm_main.s
   Uses
      At line 66 in file asm_main.s
      At line 76 in file asm_main.s

8 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

P1DIR 40004C04

Symbol: P1DIR
   Definitions
      At line 6 in file asm_main.s
   Uses
      At line 42 in file asm_main.s
Comment: P1DIR used once
P1IN 40004C00

Symbol: P1IN
   Definitions
      At line 9 in file asm_main.s
   Uses
      None
Comment: P1IN unused
P1OUT 40004C02

Symbol: P1OUT
   Definitions
      At line 8 in file asm_main.s
   Uses
      None
Comment: P1OUT unused
P1REN 40004C06

Symbol: P1REN
   Definitions
      At line 10 in file asm_main.s
   Uses
      None
Comment: P1REN unused
P2DIR 40004C05

Symbol: P2DIR
   Definitions
      At line 13 in file asm_main.s
   Uses
      At line 37 in file asm_main.s
Comment: P2DIR used once
P2IN 40004C01

Symbol: P2IN
   Definitions
      At line 15 in file asm_main.s
   Uses
      None
Comment: P2IN unused
P2OUT 40004C03

Symbol: P2OUT
   Definitions
      At line 14 in file asm_main.s
   Uses
      At line 57 in file asm_main.s
      At line 102 in file asm_main.s

P2REN 40004C07




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

Symbol: P2REN
   Definitions
      At line 12 in file asm_main.s
   Uses
      None
Comment: P2REN unused
P3DIR 40004C24

Symbol: P3DIR
   Definitions
      At line 18 in file asm_main.s
   Uses
      At line 47 in file asm_main.s
Comment: P3DIR used once
P3OUT 40004C22

Symbol: P3OUT
   Definitions
      At line 17 in file asm_main.s
   Uses
      At line 109 in file asm_main.s
Comment: P3OUT used once
segA_mask 00000040

Symbol: segA_mask
   Definitions
      At line 23 in file asm_main.s
   Uses
      None
Comment: segA_mask unused
segB_mask 00000008

Symbol: segB_mask
   Definitions
      At line 24 in file asm_main.s
   Uses
      At line 104 in file asm_main.s
Comment: segB_mask used once
segC_mask 00000080

Symbol: segC_mask
   Definitions
      At line 25 in file asm_main.s
   Uses
      At line 49 in file asm_main.s
      At line 111 in file asm_main.s

segD_mask 00000020

Symbol: segD_mask
   Definitions
      At line 26 in file asm_main.s
   Uses
      None
Comment: segD_mask unused
segE_mask 00000002

Symbol: segE_mask
   Definitions



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

      At line 27 in file asm_main.s
   Uses
      None
Comment: segE_mask unused
segF_mask 00000004

Symbol: segF_mask
   Definitions
      At line 28 in file asm_main.s
   Uses
      None
Comment: segF_mask unused
segG_mask 00000001

Symbol: segG_mask
   Definitions
      At line 29 in file asm_main.s
   Uses
      None
Comment: segG_mask unused
17 symbols
362 symbols in table
